export type OptifiExchangeIDL = { "version": "0.0.0", "name": "optifi_exchange", "instructions": [{ "name": "initialize", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "authority", "isMut": false, "isSigner": false }, { "name": "usdcCentralPool", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": false, "isSigner": false }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }, { "name": "data", "type": { "defined": "InitializeExchangeData" } }] }, { "name": "createNewInstrument", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": true, "isSigner": false }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "assetSpotPriceOracleFeed", "isMut": false, "isSigner": false }, { "name": "assetIvOracleFeed", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }, { "name": "data", "type": { "defined": "ChainData" } }] }, { "name": "generateNextInstrument", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": true, "isSigner": false }, { "name": "instrument2", "isMut": true, "isSigner": false }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "assetSpotPriceOracleFeed", "isMut": false, "isSigner": false }, { "name": "assetIvOracleFeed", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }, { "name": "bump2", "type": "u8" }, { "name": "data", "type": { "defined": "ChainData" } }, { "name": "data2", "type": { "defined": "ChainData" } }] }, { "name": "cleanExpiredInstruments", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "initializeSerumOrderbook", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "market", "isMut": true, "isSigner": false }, { "name": "coinMintPk", "isMut": false, "isSigner": false }, { "name": "pcMintPk", "isMut": false, "isSigner": false }, { "name": "coinVaultPk", "isMut": true, "isSigner": false }, { "name": "pcVaultPk", "isMut": true, "isSigner": false }, { "name": "bidsPk", "isMut": true, "isSigner": true }, { "name": "asksPk", "isMut": true, "isSigner": true }, { "name": "reqQPk", "isMut": true, "isSigner": true }, { "name": "eventQPk", "isMut": true, "isSigner": true }, { "name": "serumMarketAuthority", "isMut": false, "isSigner": false }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }, { "name": "serumDexProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "coinLotSize", "type": "u64" }, { "name": "pcLotSize", "type": "u64" }, { "name": "vaultSignerNonce", "type": "u64" }, { "name": "pcDustThreshold", "type": "u64" }] }, { "name": "createOptifiMarket", "accounts": [{ "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "exchange", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": false, "isSigner": false }, { "name": "instrument", "isMut": true, "isSigner": false }, { "name": "longSplTokenMint", "isMut": false, "isSigner": false }, { "name": "shortSplTokenMint", "isMut": false, "isSigner": false }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }] }, { "name": "stopOptifiMarket", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplToken", "isMut": false, "isSigner": false }, { "name": "instrumentShortSplToken", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "updateOptifiMarket", "accounts": [{ "name": "exchange", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": true, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "initUserOnOptifiMarket", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "serumOpenOrders", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": false, "isSigner": false }, { "name": "serumMarketAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "payer", "isMut": false, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }] }, { "name": "initAmmOnOptifiMarket", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "ammAuthority", "isMut": false, "isSigner": false }, { "name": "serumOpenOrders", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": false, "isSigner": false }, { "name": "serumMarketAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "payer", "isMut": false, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }] }, { "name": "placeOrder", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinMint", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "instrumentTokenMintAuthorityPda", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "side", "type": { "defined": "OrderSide" } }, { "name": "limit", "type": "u64" }, { "name": "maxCoinQty", "type": "u64" }, { "name": "maxPcQty", "type": "u64" }, { "name": "orderType", "type": "u8" }] }, { "name": "cancelOrderByClientOrderId", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinMint", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "centralUsdcPoolAuth", "isMut": false, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "side", "type": { "defined": "OrderSide" } }, { "name": "clientOrderId", "type": "u64" }] }, { "name": "settleOrderFunds", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "userSerumOpenOrders", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": true, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }], "args": [] }, { "name": "initUserAccount", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "liquidationAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": true }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": { "defined": "InitUserAccountBumpSeeds" } }] }, { "name": "deposit", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "depositSource", "isMut": true, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "withdraw", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": false, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "withdrawDest", "isMut": true, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "userMarginCalculate", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "recordPnlForOneUser", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "userSerumOpenOrders", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": false, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }, { "name": "assetSpotPriceOracleFeed", "isMut": false, "isSigner": false }, { "name": "usdcSpotPriceOracleFeed", "isMut": false, "isSigner": false }], "args": [] }, { "name": "settleFundForOneUser", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "centralUsdcPool", "isMut": true, "isSigner": false }, { "name": "centralUsdcPoolAuth", "isMut": false, "isSigner": false }, { "name": "usdcMint", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "recordPnlForAmm", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "ammAccount", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "ammSerumOpenOrders", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": false, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": true, "isSigner": false }, { "name": "ammUsdcVault", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "ammInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "ammInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }, { "name": "assetSpotPriceOracleFeed", "isMut": false, "isSigner": false }, { "name": "usdcSpotPriceOracleFeed", "isMut": false, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }], "args": [{ "name": "ammAuthorityBump", "type": "u8" }] }, { "name": "settleFundForAmm", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "ammAccount", "isMut": true, "isSigner": false }, { "name": "ammUsdcVault", "isMut": true, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }, { "name": "centralUsdcPool", "isMut": true, "isSigner": false }, { "name": "centralUsdcPoolAuth", "isMut": false, "isSigner": false }, { "name": "usdcMint", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "cleanExpiredInstrumentsForUser", "accounts": [{ "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "optifiExchange", "isMut": false, "isSigner": false }], "args": [] }, { "name": "initializeAmm", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "withdrawQueue", "isMut": true, "isSigner": false }, { "name": "usdcTokenVault", "isMut": false, "isSigner": false }, { "name": "lpTokenMint", "isMut": false, "isSigner": false }, { "name": "ammLiqudityAuth", "isMut": false, "isSigner": false }, { "name": "payer", "isMut": true, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }, { "name": "mangoProgram", "isMut": false, "isSigner": false }, { "name": "mangoGroup", "isMut": true, "isSigner": false }, { "name": "ammMangoAccount", "isMut": true, "isSigner": false }, { "name": "perpMarket", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }, { "name": "data", "type": { "defined": "InitializeAMMData" } }] }, { "name": "ammDeposit", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "ammQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "userQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "lpTokenMint", "isMut": true, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }, { "name": "userLpTokenVault", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "ammWithdraw", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "ammQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "userQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "lpTokenMint", "isMut": true, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }, { "name": "userLpTokenVault", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "addWithdrawRequest", "accounts": [{ "name": "amm", "isMut": true, "isSigner": false }, { "name": "withdrawQueue", "isMut": true, "isSigner": false }, { "name": "userLpTokenVault", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": true }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "consumeWithdrawQueue", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "withdrawQueue", "isMut": true, "isSigner": false }, { "name": "ammQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "userQuoteTokenVault", "isMut": true, "isSigner": false }, { "name": "lpTokenMint", "isMut": true, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }, { "name": "userLpTokenVault", "isMut": true, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "ammSyncPositions", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "longTokenVault", "isMut": false, "isSigner": false }, { "name": "shortTokenVault", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": false, "isSigner": false }, { "name": "openOrdersAccount", "isMut": false, "isSigner": false }, { "name": "openOrdersOwner", "isMut": false, "isSigner": false }], "args": [{ "name": "instrumentIndex", "type": "u16" }] }, { "name": "ammSyncFuturePositions", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "mangoProgram", "isMut": false, "isSigner": false }, { "name": "mangoGroup", "isMut": false, "isSigner": false }, { "name": "mangoGroupSigner", "isMut": false, "isSigner": false }, { "name": "mangoAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": false }, { "name": "mangoCache", "isMut": false, "isSigner": false }, { "name": "rootBank", "isMut": false, "isSigner": false }, { "name": "nodeBank", "isMut": true, "isSigner": false }, { "name": "vault", "isMut": true, "isSigner": false }, { "name": "ownerTokenAccount", "isMut": true, "isSigner": false }, { "name": "payer", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "eventQueue", "isMut": false, "isSigner": false }, { "name": "perpMarket", "isMut": false, "isSigner": false }], "args": [{ "name": "perpMarketIndex", "type": "u8" }] }, { "name": "ammUpdateFutureOrders", "accounts": [{ "name": "amm", "isMut": true, "isSigner": false }, { "name": "mangoProgram", "isMut": false, "isSigner": false }, { "name": "mangoGroup", "isMut": false, "isSigner": false }, { "name": "mangoAccount", "isMut": true, "isSigner": false }, { "name": "owner", "isMut": false, "isSigner": false }, { "name": "mangoCache", "isMut": false, "isSigner": false }, { "name": "perpMarket", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "rootBank", "isMut": false, "isSigner": false }, { "name": "nodeBank", "isMut": true, "isSigner": false }, { "name": "vault", "isMut": true, "isSigner": false }, { "name": "ownerTokenAccount", "isMut": true, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "ammCalculateDelta", "accounts": [{ "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "quoteTokenVault", "isMut": false, "isSigner": false }], "args": [] }, { "name": "ammCalculateProposal", "accounts": [{ "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }], "args": [] }, { "name": "ammUpdateOrders", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "ammUsdcVault", "isMut": true, "isSigner": false }, { "name": "ammAuthority", "isMut": false, "isSigner": false }, { "name": "ammInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "ammInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": false, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinMint", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "instrumentTokenMintAuthorityPda", "isMut": false, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "orderLimit", "type": "u16" }, { "name": "instrumentIndex", "type": "u16" }, { "name": "ammAuthorityBump", "type": "u8" }, { "name": "marketAuthBump", "type": "u8" }] }, { "name": "ammRemoveInstrument", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "instrument", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "ammAddInstrument", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "instrument", "isMut": false, "isSigner": false }, { "name": "ammLongTokenVault", "isMut": false, "isSigner": false }, { "name": "ammShortTokenVault", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "marginStressInit", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": true, "isSigner": false }, { "name": "payer", "isMut": false, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }, { "name": "asset", "type": "u8" }] }, { "name": "marginStressSync", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": true, "isSigner": false }, { "name": "assetFeed", "isMut": false, "isSigner": false }, { "name": "usdcFeed", "isMut": false, "isSigner": false }, { "name": "ivFeed", "isMut": false, "isSigner": false }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [] }, { "name": "marginStressCalculate", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": true, "isSigner": false }], "args": [] }, { "name": "initLiquidation", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": false, "isSigner": false }, { "name": "liquidationState", "isMut": true, "isSigner": false }], "args": [] }, { "name": "liquidationRegister", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "liquidationState", "isMut": true, "isSigner": false }, { "name": "market", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "openOrdersOwner", "isMut": false, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }], "args": [] }, { "name": "liquidationPlaceOrder", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "liquidationState", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "liquidator", "isMut": true, "isSigner": true }], "args": [] }, { "name": "liquidationSettleOrder", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "liquidationState", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": true, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "liquidator", "isMut": true, "isSigner": true }], "args": [] }, { "name": "liquidationToAmm", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "liquidationState", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": false, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": false, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "liquidator", "isMut": true, "isSigner": true }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "instrumentTokenMintAuthorityPda", "isMut": false, "isSigner": false }, { "name": "instrumentLongSplTokenMint", "isMut": true, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "ammInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "ammInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "ammLiquidityAuth", "isMut": false, "isSigner": false }, { "name": "amm", "isMut": false, "isSigner": false }], "args": [] }, { "name": "registerMarketMaker", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "systemProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "bump", "type": "u8" }] }, { "name": "mmPostOnlyOrder", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinMint", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "instrumentTokenMintAuthorityPda", "isMut": false, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }, { "name": "rent", "isMut": false, "isSigner": false }], "args": [{ "name": "side", "type": { "defined": "OrderSide" } }, { "name": "limit", "type": "u64" }, { "name": "maxCoinQty", "type": "u64" }, { "name": "maxPcQty", "type": "u64" }] }, { "name": "mmCalculation", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "marginStressAccount", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": true, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }], "args": [] }, { "name": "mmCancelOrder", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "userInstrumentLongTokenVault", "isMut": true, "isSigner": false }, { "name": "userInstrumentShortTokenVault", "isMut": true, "isSigner": false }, { "name": "optifiMarket", "isMut": false, "isSigner": false }, { "name": "serumMarket", "isMut": true, "isSigner": false }, { "name": "openOrders", "isMut": true, "isSigner": false }, { "name": "requestQueue", "isMut": true, "isSigner": false }, { "name": "eventQueue", "isMut": true, "isSigner": false }, { "name": "bids", "isMut": true, "isSigner": false }, { "name": "asks", "isMut": true, "isSigner": false }, { "name": "coinMint", "isMut": true, "isSigner": false }, { "name": "coinVault", "isMut": true, "isSigner": false }, { "name": "pcVault", "isMut": true, "isSigner": false }, { "name": "vaultSigner", "isMut": false, "isSigner": false }, { "name": "instrumentShortSplTokenMint", "isMut": true, "isSigner": false }, { "name": "pruneAuthority", "isMut": false, "isSigner": false }, { "name": "serumDexProgramId", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "mmSettlePenaltyReward", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccount", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "centralUsdcPoolAuth", "isMut": false, "isSigner": false }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "scheduleMarketMakerWithdrawal", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "clock", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "executeMarketMakerWithdrawal", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "userAccount", "isMut": true, "isSigner": false }, { "name": "userMarginAccountUsdc", "isMut": true, "isSigner": false }, { "name": "withdrawDest", "isMut": false, "isSigner": false }, { "name": "marketMakerAccount", "isMut": true, "isSigner": false }, { "name": "user", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [] }, { "name": "withdrawUsdcFeePool", "accounts": [{ "name": "optifiExchange", "isMut": false, "isSigner": false }, { "name": "usdcFeePool", "isMut": true, "isSigner": false }, { "name": "centralUsdcPoolAuth", "isMut": false, "isSigner": false }, { "name": "withdrawDest", "isMut": true, "isSigner": false }, { "name": "authority", "isMut": false, "isSigner": true }, { "name": "tokenProgram", "isMut": false, "isSigner": false }], "args": [{ "name": "amount", "type": "u64" }] }, { "name": "updateOgNftMint", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "authority", "isMut": false, "isSigner": true }], "args": [{ "name": "ogNftMint", "type": { "option": "publicKey" } }] }, { "name": "updateUserDepositLimit", "accounts": [{ "name": "optifiExchange", "isMut": true, "isSigner": false }, { "name": "authority", "isMut": false, "isSigner": true }], "args": [{ "name": "newAmount", "type": { "option": "u64" } }] }], "accounts": [{ "name": "ammAccount", "type": { "kind": "struct", "fields": [{ "name": "optifiExchange", "type": "publicKey" }, { "name": "ammIdx", "type": "u8" }, { "name": "quoteTokenMint", "type": "publicKey" }, { "name": "quoteTokenVault", "type": "publicKey" }, { "name": "lpTokenMint", "type": "publicKey" }, { "name": "ammCapacity", "type": "u64" }, { "name": "bump", "type": "u8" }, { "name": "asset", "type": "u8" }, { "name": "tradingInstruments", "type": { "vec": "publicKey" } }, { "name": "positions", "type": { "vec": { "defined": "Position" } } }, { "name": "proposals", "type": { "vec": { "defined": "Proposal" } } }, { "name": "state", "type": { "defined": "AmmState" } }, { "name": "flags", "type": { "vec": "bool" } }, { "name": "iv", "type": "u64" }, { "name": "price", "type": "u64" }, { "name": "netDelta", "type": "i64" }, { "name": "timestamp", "type": "u64" }, { "name": "totalLiquidityUsdc", "type": "u64" }, { "name": "duration", "type": { "defined": "Duration" } }, { "name": "expiryDate", "type": "u64" }, { "name": "contractSize", "type": "u64" }, { "name": "clientOrderIdCounter", "type": "u64" }, { "name": "ammMangoAccount", "type": "publicKey" }, { "name": "isHedgeNeeded", "type": "bool" }, { "name": "isHedgeInProgress", "type": "bool" }, { "name": "tempPnl", "type": { "defined": "TempPnL" } }, { "name": "withdrawQueue", "type": "publicKey" }] } }, { "name": "ammWithdrawRequestQueue", "type": { "kind": "struct", "fields": [{ "name": "requestIdCounter", "type": "u32" }, { "name": "head", "type": "u32" }, { "name": "tail", "type": "u32" }, { "name": "requests", "type": { "array": [{ "defined": "WithdrawRequest" }, 5000] } }] } }, { "name": "chain", "type": { "kind": "struct", "fields": [{ "name": "asset", "type": "u8" }, { "name": "instrumentType", "type": { "defined": "InstrumentType" } }, { "name": "strike", "type": "u64" }, { "name": "expiryDate", "type": "u64" }, { "name": "duration", "type": { "defined": "Duration" } }, { "name": "start", "type": "u64" }, { "name": "expiryType", "type": { "defined": "ExpiryType" } }, { "name": "isListedOnMarket", "type": "bool" }, { "name": "contractSize", "type": "u64" }] } }, { "name": "exchange", "type": { "kind": "struct", "fields": [{ "name": "uuid", "type": "string" }, { "name": "version", "type": "u32" }, { "name": "exchangeAuthority", "type": "publicKey" }, { "name": "usdcMint", "type": "publicKey" }, { "name": "usdcCentralPool", "type": "publicKey" }, { "name": "usdcFeePool", "type": "publicKey" }, { "name": "userAccountIdCounter", "type": "u64" }, { "name": "oracle", "type": { "vec": { "defined": "OracleData" } } }, { "name": "markets", "type": { "vec": { "defined": "OptifiMarketKeyData" } } }, { "name": "instrumentCommon", "type": { "vec": { "defined": "InstrumentCommon" } } }, { "name": "instrumentUnique", "type": { "vec": { "vec": { "defined": "InstrumentUnique" } } } }, { "name": "ogNftMint", "type": { "option": "publicKey" } }, { "name": "userDepositLimit", "type": { "option": "u64" } }] } }, { "name": "liquidationState", "type": { "kind": "struct", "fields": [{ "name": "userAccount", "type": "publicKey" }, { "name": "status", "type": { "defined": "LiquidationStatus" } }, { "name": "timestamp", "type": "u64" }, { "name": "markets", "type": { "vec": "publicKey" } }, { "name": "values", "type": { "vec": "i64" } }] } }, { "name": "marginStressAccount", "type": { "kind": "struct", "fields": [{ "name": "optifiExchange", "type": "publicKey" }, { "name": "bump", "type": "u8" }, { "name": "asset", "type": { "defined": "Asset" } }, { "name": "spotPrice", "type": "u64" }, { "name": "iv", "type": "u64" }, { "name": "timestamp", "type": "u64" }, { "name": "state", "type": { "defined": "MarginStressState" } }, { "name": "flags", "type": { "vec": "bool" } }, { "name": "instruments", "type": { "vec": "publicKey" } }, { "name": "strikes", "type": { "vec": "u64" } }, { "name": "isCall", "type": "bytes" }, { "name": "expiryDate", "type": { "vec": "u64" } }, { "name": "optionPrice", "type": { "vec": "u64" } }, { "name": "intrinsicValue", "type": { "vec": "u64" } }, { "name": "optionPriceDeltaInStressPrice", "type": { "vec": { "vec": "i64" } } }] } }, { "name": "market", "type": { "kind": "struct", "fields": [{ "name": "version", "type": "i32" }, { "name": "asset", "type": { "defined": "Asset" } }, { "name": "marketAuthority", "type": "publicKey" }] } }, { "name": "marketMakerAccount", "type": { "kind": "struct", "fields": [{ "name": "userAccount", "type": "publicKey" }, { "name": "active", "type": "bool" }, { "name": "withdrawTs", "type": "u64" }, { "name": "withdrawalAmount", "type": "u64" }, { "name": "openOrdersData", "type": { "vec": { "defined": "OpenOrdersData" } } }] } }, { "name": "optifiMarket", "type": { "kind": "struct", "fields": [{ "name": "optifiMarketId", "type": "u16" }, { "name": "serumMarket", "type": "publicKey" }, { "name": "instrument", "type": "publicKey" }, { "name": "instrumentLongSplToken", "type": "publicKey" }, { "name": "instrumentShortSplToken", "type": "publicKey" }, { "name": "isStopped", "type": "bool" }, { "name": "bump", "type": "u8" }] } }, { "name": "userAccount", "type": { "kind": "struct", "fields": [{ "name": "optifiExchange", "type": "publicKey" }, { "name": "owner", "type": "publicKey" }, { "name": "id", "type": "u64" }, { "name": "userMarginAccountUsdc", "type": "publicKey" }, { "name": "tempPnl", "type": { "defined": "TempPnL" } }, { "name": "state", "type": { "defined": "AccountState" } }, { "name": "positions", "type": { "vec": { "defined": "UserPosition" } } }, { "name": "isInLiquidation", "type": "bool" }, { "name": "isMarketMaker", "type": "bool" }, { "name": "bump", "type": "u8" }, { "name": "amountToReserve", "type": { "array": ["u64", 10] } }, { "name": "netOptionValue", "type": { "array": ["i64", 10] } }, { "name": "tradingMarkets", "type": { "vec": "publicKey" } }, { "name": "liquidateFlags", "type": { "vec": "bool" } }, { "name": "clientOrderIdCounter", "type": "u64" }, { "name": "ammEquities", "type": { "array": [{ "defined": "UserAmmEquity" }, 20] } }, { "name": "fee", "type": "u64" }, { "name": "tradingValue", "type": "u64" }, { "name": "totalDeposit", "type": "u64" }] } }], "types": [{ "name": "Proposal", "type": { "kind": "struct", "fields": [{ "name": "instrument", "type": "publicKey" }, { "name": "isStarted", "type": "bool" }, { "name": "askOrdersSize", "type": { "vec": "u64" } }, { "name": "bidOrdersSize", "type": { "vec": "u64" } }, { "name": "askOrdersPrice", "type": { "vec": "u64" } }, { "name": "bidOrdersPrice", "type": { "vec": "u64" } }, { "name": "askClientOrderIds", "type": { "vec": "u64" } }, { "name": "bidClientOrderIds", "type": { "vec": "u64" } }, { "name": "prevAskOrdersPrice", "type": { "vec": "u64" } }, { "name": "prevBidOrdersPrice", "type": { "vec": "u64" } }] } }, { "name": "Position", "type": { "kind": "struct", "fields": [{ "name": "instruments", "type": "publicKey" }, { "name": "longTokenVault", "type": "publicKey" }, { "name": "shortTokenVault", "type": "publicKey" }, { "name": "latestPosition", "type": "i64" }, { "name": "usdcBalance", "type": "u64" }] } }, { "name": "WithdrawRequest", "type": { "kind": "struct", "fields": [{ "name": "requestId", "type": "u32" }, { "name": "userAccountId", "type": "u32" }, { "name": "amount", "type": "u64" }, { "name": "requestTimestamp", "type": "u64" }] } }, { "name": "ChainDataWithAuth", "type": { "kind": "struct", "fields": [{ "name": "asset", "type": "u8" }, { "name": "instrumentType", "type": "u8" }, { "name": "strike", "type": "u64" }, { "name": "expiryDate", "type": "u64" }, { "name": "duration", "type": "u8" }, { "name": "start", "type": "u64" }, { "name": "expiryType", "type": "u8" }, { "name": "contractSize", "type": "u64" }, { "name": "instrumentIdx", "type": "u8" }] } }, { "name": "ChainData", "type": { "kind": "struct", "fields": [{ "name": "asset", "type": "u8" }, { "name": "instrumentType", "type": "u8" }, { "name": "expiryDate", "type": "u64" }, { "name": "duration", "type": "u8" }, { "name": "start", "type": "u64" }, { "name": "expiryType", "type": "u8" }, { "name": "contractSize", "type": "u64" }, { "name": "instrumentIdx", "type": "u8" }] } }, { "name": "OracleData", "type": { "kind": "struct", "fields": [{ "name": "asset", "type": { "defined": "Asset" } }, { "name": "spotOracle", "type": { "option": "publicKey" } }, { "name": "ivOracle", "type": { "option": "publicKey" } }] } }, { "name": "InstrumentCommon", "type": { "kind": "struct", "fields": [{ "name": "asset", "type": { "defined": "Asset" } }, { "name": "expiryDate", "type": "u64" }, { "name": "expiryType", "type": { "defined": "ExpiryType" } }] } }, { "name": "InstrumentUnique", "type": { "kind": "struct", "fields": [{ "name": "strike", "type": "u32" }, { "name": "instrumentPubkeys", "type": { "array": ["publicKey", 2] } }] } }, { "name": "OptifiMarketKeyData", "type": { "kind": "struct", "fields": [{ "name": "optifiMarketPubkey", "type": "publicKey" }, { "name": "expiryDate", "type": "u64" }, { "name": "isStopped", "type": "bool" }] } }, { "name": "InitializeExchangeData", "type": { "kind": "struct", "fields": [{ "name": "uuid", "type": "string" }, { "name": "version", "type": "u32" }, { "name": "exchangeAuthority", "type": "publicKey" }, { "name": "usdcMint", "type": "publicKey" }, { "name": "btcSpotOracle", "type": "publicKey" }, { "name": "ethSpotOracle", "type": "publicKey" }, { "name": "usdcSpotOracle", "type": "publicKey" }, { "name": "btcIvOracle", "type": "publicKey" }, { "name": "ethIvOracle", "type": "publicKey" }, { "name": "ogNftMint", "type": { "option": "publicKey" } }, { "name": "userDepositLimit", "type": { "option": "u64" } }] } }, { "name": "InitializeAMMData", "type": { "kind": "struct", "fields": [{ "name": "ammIdx", "type": "u8" }, { "name": "ammCapacity", "type": "u64" }, { "name": "bump", "type": "u8" }, { "name": "asset", "type": "u8" }, { "name": "numInstruments", "type": "u8" }, { "name": "duration", "type": "u8" }, { "name": "contractSize", "type": "u64" }] } }, { "name": "InitUserAccountBumpSeeds", "type": { "kind": "struct", "fields": [{ "name": "userAccount", "type": "u8" }, { "name": "liquidationAccount", "type": "u8" }] } }, { "name": "OptionData", "type": { "kind": "struct", "fields": [{ "name": "size", "type": "i32" }] } }, { "name": "StressFunctionResult", "type": { "kind": "struct", "fields": [{ "name": "price", "type": { "vec": { "vec": { "defined": "f32" } } } }, { "name": "intrinsicValue", "type": { "vec": { "vec": { "defined": "f32" } } } }, { "name": "stressPriceDelta", "type": { "vec": { "vec": { "defined": "f32" } } } }] } }, { "name": "MarginFunctionResult", "type": { "kind": "struct", "fields": [{ "name": "netQty", "type": "i64" }, { "name": "notionalQty", "type": "i64" }, { "name": "net", "type": { "defined": "f32" } }, { "name": "notional", "type": { "defined": "f32" } }, { "name": "stressResult", "type": { "defined": "f32" } }, { "name": "netIntrinsic", "type": { "defined": "f32" } }, { "name": "netPremium", "type": { "defined": "f32" } }, { "name": "maturingNetIntrinsic", "type": { "defined": "f32" } }, { "name": "maturingPremium", "type": { "defined": "f32" } }, { "name": "maturingLiquidity", "type": { "defined": "f32" } }, { "name": "totalMargin", "type": { "defined": "f32" } }, { "name": "netLeverage", "type": { "defined": "f32" } }, { "name": "notionalLeverage", "type": { "defined": "f32" } }] } }, { "name": "OpenOrdersData", "type": { "kind": "struct", "fields": [{ "name": "market", "type": "publicKey" }, { "name": "timestamp", "type": "u64" }, { "name": "bids", "type": { "vec": { "defined": "Order" } } }, { "name": "asks", "type": { "vec": { "defined": "Order" } } }, { "name": "ask1", "type": "u64" }, { "name": "bid1", "type": "u64" }, { "name": "spotPrice", "type": "u64" }, { "name": "delta", "type": "i64" }, { "name": "margin", "type": "u64" }, { "name": "position", "type": "i64" }, { "name": "state", "type": { "defined": "MmState" } }, { "name": "volume", "type": "u64" }, { "name": "totalIndicator", "type": "u64" }, { "name": "timeWeightedIndicator", "type": "u64" }, { "name": "dailyVolume", "type": "u64" }, { "name": "penalty", "type": "u64" }, { "name": "askReward", "type": "u64" }, { "name": "bidReward", "type": "u64" }] } }, { "name": "Order", "type": { "kind": "struct", "fields": [{ "name": "price", "type": "u64" }, { "name": "size", "type": "u64" }, { "name": "clientOrderId", "type": "u64" }] } }, { "name": "UserPosition", "type": { "kind": "struct", "fields": [{ "name": "instrument", "type": "publicKey" }, { "name": "longQty", "type": "u64" }, { "name": "shortQty", "type": "u64" }] } }, { "name": "TempPnL", "type": { "kind": "struct", "fields": [{ "name": "amount", "type": "i64" }, { "name": "epoch", "type": "u64" }] } }, { "name": "UserAmmEquity", "type": { "kind": "struct", "fields": [{ "name": "notioanlWithdrawable", "type": "u64" }, { "name": "lpAmountInQueue", "type": "u64" }] } }, { "name": "AmmState", "type": { "kind": "enum", "variants": [{ "name": "Sync" }, { "name": "CalculateDelta" }, { "name": "CalculateProposal" }, { "name": "Execute" }] } }, { "name": "Asset", "type": { "kind": "enum", "variants": [{ "name": "Bitcoin" }, { "name": "Ethereum" }, { "name": "USDC" }] } }, { "name": "Duration", "type": { "kind": "enum", "variants": [{ "name": "Weekly" }, { "name": "Monthly" }] } }, { "name": "InstrumentType", "type": { "kind": "enum", "variants": [{ "name": "Put" }, { "name": "Call" }] } }, { "name": "ExpiryType", "type": { "kind": "enum", "variants": [{ "name": "Standard" }, { "name": "Perpetual" }] } }, { "name": "InstrumentData", "type": { "kind": "enum", "variants": [] } }, { "name": "InstrumentExpiryType", "type": { "kind": "enum", "variants": [{ "name": "Standard" }, { "name": "Perpetual" }] } }, { "name": "LiquidationStatus", "type": { "kind": "enum", "variants": [{ "name": "Healthy" }, { "name": "CancelOrder" }, { "name": "PlaceOrder" }, { "name": "SettleOrder" }] } }, { "name": "MarginStressState", "type": { "kind": "enum", "variants": [{ "name": "Sync" }, { "name": "Calculate" }, { "name": "Available" }] } }, { "name": "MmState", "type": { "kind": "enum", "variants": [{ "name": "Calculation" }, { "name": "Available" }] } }, { "name": "OracleDataType", "type": { "kind": "enum", "variants": [{ "name": "Spot" }, { "name": "IV" }] } }, { "name": "OrderSide", "type": { "kind": "enum", "variants": [{ "name": "Bid" }, { "name": "Ask" }] } }, { "name": "SpotInputOption", "type": { "kind": "enum", "variants": [{ "name": "SingleSpot", "fields": [{ "defined": "f32" }] }, { "name": "MultiSpots", "fields": [{ "vec": { "vec": { "defined": "f32" } } }] }] } }, { "name": "AccountState", "type": { "kind": "enum", "variants": [{ "name": "Uninitialized" }, { "name": "Initialized" }, { "name": "Frozen" }] } }], "errors": [{ "code": 300, "name": "AccountCannotInit", "msg": "the user account cannot be initialized" }, { "code": 301, "name": "InvalidAccount", "msg": "the user account is invalid" }, { "code": 302, "name": "InvalidMarginAccount", "msg": "the margin account is invalid" }, { "code": 303, "name": "UnauthorizedAccount", "msg": "the account is not owned by the payer" }, { "code": 304, "name": "InsufficientFund", "msg": "the account balance is insufficient" }, { "code": 305, "name": "TokenTransferFailed", "msg": "Token transfer failed" }, { "code": 306, "name": "UnauthorizedTokenVault", "msg": "the token vault is not owned by the payer" }, { "code": 307, "name": "InvalidPDA", "msg": "the provided pda is invalid" }, { "code": 308, "name": "UuidMustBeExactly6Length", "msg": "Uuid must be exactly of 6 length" }, { "code": 309, "name": "NumericalOverflowError", "msg": "Numerical overflow error!" }, { "code": 310, "name": "InsufficientMargin", "msg": "Insufficient Margin!" }, { "code": 311, "name": "IncorrectCoinMint", "msg": "Incorrect coin mint!" }, { "code": 312, "name": "CannotRecordPnLBeforeMarketsExpired", "msg": "Cannot record pnl befor markets is expired!" }, { "code": 313, "name": "CannotSettleFundBeforeMarketsStopped", "msg": "Cannot settle fund befor markets has been stopped!" }, { "code": 314, "name": "CannotRecordPnLForStoppedMarket", "msg": "Cannot record pnl when market is stopped!" }, { "code": 315, "name": "InstrumetIsDelisted", "msg": "Cannot record pnl for delisted instrument!" }, { "code": 316, "name": "IncorrectOracleAccount", "msg": "Incorrect oracle account" }, { "code": 317, "name": "WrongState", "msg": "the working state is wrong" }, { "code": 318, "name": "WrongInstrument", "msg": "the instrument has already been done" }, { "code": 319, "name": "NoEnoughOrdersInProposal", "msg": "no enough orders in proposal to execute" }, { "code": 320, "name": "CannotRemoveInstrumentForAMM", "msg": "cannot remove the instrument for amm" }, { "code": 321, "name": "DuplicateInstrumentForAMM", "msg": "cannot add the instrument for amm due to duplication" }, { "code": 322, "name": "UserNotInLiquidation", "msg": "User is not in liquidation" }, { "code": 323, "name": "UserNotInCancelOrder", "msg": "User is not in cancel order status" }, { "code": 324, "name": "UserAlreadyInLiquidation", "msg": "User was already in liquidation" }, { "code": 325, "name": "InstrumentAlreadyRegisteredForLiquidation", "msg": "Instrument was already registered for liquidation" }, { "code": 326, "name": "CannotPlaceOrdersInLiquidation", "msg": "Users cannot place manual orders while their accounts are in liquidation" }, { "code": 327, "name": "CannotCancelOrdersInLiquidation", "msg": "Users cannot cancel manual orders while their accounts are in liquidation" }, { "code": 328, "name": "PoolNotCentralUSDCPool", "msg": "Provided USDC pool is not central pool" }, { "code": 329, "name": "InvalidSerumAuthority", "msg": "Invalid open orders market authority" }, { "code": 330, "name": "WithdrawRequestInvalid", "msg": "Only one withdraw request allowed at one time" }, { "code": 331, "name": "UserIsMarketMaker", "msg": "User is already registered as market maker" }, { "code": 332, "name": "MMWithdrawNotInWindow", "msg": "Market maker withdraw outside of valid window" }, { "code": 333, "name": "WrongAsset", "msg": "Wrong asset" }, { "code": 334, "name": "TimeOut", "msg": "Should update the margin stress again" }, { "code": 335, "name": "OrderFailed", "msg": "The order is failed" }, { "code": 336, "name": "WrongFeeAccount", "msg": "Wrong USDC fee account" }, { "code": 337, "name": "InvalidMangoAccount", "msg": "the mango account is invalid" }, { "code": 338, "name": "InvalidMangoToken", "msg": "the mango token index is invalid" }, { "code": 339, "name": "IncorrectOpenOrdersAccountsLength", "msg": "the length of open orders accounts is incorrect" }, { "code": 340, "name": "WrongPerpMarketIndex", "msg": "wrong perp market index" }, { "code": 341, "name": "MismatchedAsset", "msg": "asset of amm and the instrument are mismatched" }, { "code": 342, "name": "InstrumentExpired", "msg": "the instrument is expired" }, { "code": 343, "name": "MismatchedDuration", "msg": "duration of amm and the instrument are mismatched" }, { "code": 344, "name": "DontNeedGenerateNextInstrument", "msg": "spot price is in strike interval" }, { "code": 345, "name": "InsufficientWithdrawableLPAmount", "msg": "insufficient withdrawable lp token amount" }, { "code": 346, "name": "WithdrawRequestQueueIsFull", "msg": "withdraw request queue is full" }, { "code": 347, "name": "WithdrawRequestQueueIsEmpty", "msg": "no withdraw request to process" }, { "code": 348, "name": "MismatchedWithdrawUserId", "msg": "mismatched withdraw request user id" }, { "code": 349, "name": "AmmWithdrawNotInWindow", "msg": "amm withdraw not in correct time window" }, { "code": 350, "name": "WithdrawWouldBreachAmmDelta", "msg": "withdrawal would breach amm delta" }, { "code": 351, "name": "NoOGNftFound", "msg": "No OG NFT found" }, { "code": 352, "name": "InvalidOGNftVault", "msg": "Invalid OG NFT vault" }, { "code": 353, "name": "InvalidOGNftMint", "msg": "Invalid OG NFT mint" }, { "code": 354, "name": "UnauthorizedOperation", "msg": "unauthorized operation" }, { "code": 355, "name": "InsufficientAmmCapacity", "msg": "amm trading capacity is not enough" }, { "code": 356, "name": "CannotDepositMoreThanLimit", "msg": "cannot deposit more than the deposit limit" }] };
import { IdlAccounts } from '@project-serum/anchor';

export type AmmState = Record<string, Record<string, any>>
export const AmmState = {
  Sync: { sync: {} },
  CalculateDelta: { calculatedelta: {} },
  CalculateProposal: { calculateproposal: {} },
  Execute: { execute: {} }
}


export type Asset = Record<string, Record<string, any>>
export const Asset = {
  Bitcoin: { bitcoin: {} },
  Ethereum: { ethereum: {} },
  USDC: { usdc: {} }
}


export type Duration = Record<string, Record<string, any>>
export const Duration = {
  Weekly: { weekly: {} },
  Monthly: { monthly: {} }
}


export type InstrumentType = Record<string, Record<string, any>>
export const InstrumentType = {
  Put: { put: {} },
  Call: { call: {} }
}


export type ExpiryType = Record<string, Record<string, any>>
export const ExpiryType = {
  Standard: { standard: {} },
  Perpetual: { perpetual: {} }
}


export type InstrumentData = Record<string, Record<string, any>>
export const InstrumentData = {

}


export type InstrumentExpiryType = Record<string, Record<string, any>>
export const InstrumentExpiryType = {
  Standard: { standard: {} },
  Perpetual: { perpetual: {} }
}


export type LiquidationStatus = Record<string, Record<string, any>>
export const LiquidationStatus = {
  Healthy: { healthy: {} },
  CancelOrder: { cancelorder: {} },
  PlaceOrder: { placeorder: {} },
  SettleOrder: { settleorder: {} }
}


export type MarginStressState = Record<string, Record<string, any>>
export const MarginStressState = {
  Sync: { sync: {} },
  Calculate: { calculate: {} },
  Available: { available: {} }
}


export type MmState = Record<string, Record<string, any>>
export const MmState = {
  Calculation: { calculation: {} },
  Available: { available: {} }
}


export type OracleDataType = Record<string, Record<string, any>>
export const OracleDataType = {
  Spot: { spot: {} },
  IV: { iv: {} }
}


export type OrderSide = Record<string, Record<string, any>>
export const OrderSide = {
  Bid: { bid: {} },
  Ask: { ask: {} }
}


export type SpotInputOption = Record<string, Record<string, any>>
export const SpotInputOption = {
  SingleSpot: { singlespot: {} },
  MultiSpots: { multispots: {} }
}


export type AccountState = Record<string, Record<string, any>>
export const AccountState = {
  Uninitialized: { uninitialized: {} },
  Initialized: { initialized: {} },
  Frozen: { frozen: {} }
}




export type AmmAccount = IdlAccounts<OptifiExchangeIDL>["ammAccount"]

export type AmmWithdrawRequestQueue = IdlAccounts<OptifiExchangeIDL>["ammWithdrawRequestQueue"]

export type Chain = IdlAccounts<OptifiExchangeIDL>["chain"]

export type Exchange = IdlAccounts<OptifiExchangeIDL>["exchange"]

export type LiquidationState = IdlAccounts<OptifiExchangeIDL>["liquidationState"]

export type MarginStressAccount = IdlAccounts<OptifiExchangeIDL>["marginStressAccount"]

export type Market = IdlAccounts<OptifiExchangeIDL>["market"]

export type MarketMakerAccount = IdlAccounts<OptifiExchangeIDL>["marketMakerAccount"]

export type OptifiMarket = IdlAccounts<OptifiExchangeIDL>["optifiMarket"]

export type UserAccount = IdlAccounts<OptifiExchangeIDL>["userAccount"]

